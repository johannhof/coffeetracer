// Generated by CoffeeScript 1.4.0
(function () {
    var c, cam, canvas, ctx, height, imgData, lights, objects, tracer, width, world, x, y, _i, _j;

    canvas = document.getElementById("mainCanvas");

    ctx = canvas.getContext("2d");

    ctx.fillStyle = "white";

    width = canvas.width;

    height = canvas.height;

    ctx.fillRect(0, 0, width, height);

    imgData = ctx.getImageData(0, 0, width, height);

    lights = [];

    objects = [];

    cam = new PerspectiveCamera(new Point3(5, 5, 5), new Vector3(-1, -1, -1), new Vector3(0, 1, 0), Math.PI / 4);

    world = new World(new Color(0, 0, 0), objects, lights, new Color(0.1, 0.1, 0.1), 1);

    tracer = new Tracer(world);

    for(x = _i = 0; _i <= width; x = _i += 1) {
        for(y = _j = 0; _j <= height; y = _j += 1) {
            c = tracer.colorFor(cam.rayFor(width, height, x, y));
            imgData.data[(x * height + y) * 4 + 0] = c.r * 255;
            imgData.data[(x * height + y) * 4 + 1] = c.g * 255;
            imgData.data[(x * height + y) * 4 + 2] = c.b * 255;
        }
    }

    ctx.putImageData(imgData, 0, 0);

}).call(this);
